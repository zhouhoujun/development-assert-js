{"version":3,"sources":["index.js","index.ts"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","development_core_1","require","cache","sourcemaps","uglify","babel","JsTasks","name","oper","Operation","build","watch","pipes","init","config","option","babelOption","presets","write","sourceMaps","release","deploy","dynamicTask","exports"],"mappings":"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","file":"../index.js","sourcesContent":["\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nconst development_core_1 = require('development-core');\nconst cache = require('gulp-cached');\nconst sourcemaps = require('gulp-sourcemaps');\nconst uglify = require('gulp-uglify');\nconst babel = require('gulp-babel');\nlet JsTasks = class JsTasks {\n    tasks() {\n        return [\n            {\n                name: 'jscompile',\n                oper: development_core_1.Operation.build,\n                watch: true,\n                pipes: [\n                        () => cache('javascript'),\n                        () => sourcemaps.init(),\n                        (config) => babel(config.option.babelOption || { presets: ['es2015'] }),\n                        (config) => sourcemaps.write(config.option.sourceMaps || './sourcemaps')\n                ]\n            },\n            {\n                name: 'jscompile',\n                oper: development_core_1.Operation.release | development_core_1.Operation.deploy,\n                pipes: [\n                        () => cache('javascript'),\n                        () => sourcemaps.init(),\n                        (config) => babel(config.option.babelOption || { presets: ['es2015'] }),\n                        () => uglify(),\n                        (config) => sourcemaps.write(config.option.sourceMaps || './sourcemaps')\n                ]\n            }\n        ];\n    }\n};\nJsTasks = __decorate([\n    development_core_1.dynamicTask, \n    __metadata('design:paramtypes', [])\n], JsTasks);\nexports.JsTasks = JsTasks;\n","// import * as path from 'path';\r\nimport { IDynamicTaskOption, Operation, IAsserts, IDynamicTasks, dynamicTask } from 'development-core';\r\n// import * as chalk from 'chalk';\r\nconst cache = require('gulp-cached');\r\nconst sourcemaps = require('gulp-sourcemaps');\r\nconst uglify = require('gulp-uglify');\r\nconst babel = require('gulp-babel');\r\n\r\n\r\n/**\r\n * js assert task optin.\r\n * \r\n * @export\r\n * @interface IJsTaskOption\r\n * @extends {IAsserts}\r\n */\r\nexport interface IJsTaskOption extends IAsserts {\r\n\r\n    /**\r\n     * babel 6 option.\r\n     * \r\n     * @type {*}\r\n     * @memberOf IJsTaskOption\r\n     */\r\n    babelOption: any;\r\n\r\n    /**\r\n     * sourceMaps path.\r\n     * \r\n     * @type {string}\r\n     * @memberOf IJsTaskOption\r\n     */\r\n    sourceMaps: string;\r\n}\r\n\r\n@dynamicTask\r\nexport class JsTasks implements IDynamicTasks {\r\n    tasks(): IDynamicTaskOption[] {\r\n        return [\r\n            {\r\n                name: 'jscompile',\r\n                oper: Operation.build,\r\n                watch: true,\r\n                pipes: [\r\n                    () => cache('javascript'),\r\n                    () => sourcemaps.init(),\r\n                    (config) => babel((<IJsTaskOption>config.option).babelOption || { presets: ['es2015'] }),\r\n                    (config) => sourcemaps.write((<IJsTaskOption>config.option).sourceMaps || './sourcemaps')\r\n                ]\r\n            },\r\n            {\r\n                name: 'jscompile',\r\n                oper: Operation.release | Operation.deploy,\r\n                pipes: [\r\n                    () => cache('javascript'),\r\n                    () => sourcemaps.init(),\r\n                    (config) => babel((<IJsTaskOption>config.option).babelOption || { presets: ['es2015'] }),\r\n                    () => uglify(),\r\n                    (config) => sourcemaps.write((<IJsTaskOption>config.option).sourceMaps || './sourcemaps')\r\n                ]\r\n            }\r\n        ];\r\n    }\r\n}\r\n"]}