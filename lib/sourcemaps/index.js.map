{"version":3,"sources":["index.ts"],"names":["development_core_1","require","cache","sourcemaps","uglify","babel","JsTasks","prototype","tasks","name","oper","Operation","build","watch","pipes","init","config","option","babelOption","presets","write","sourceMaps","release","deploy","__decorate","dynamicTask","exports"],"mappings":"sgBACAA,mBAAAC,QAAoF,oBAE9EC,MAAQD,QAAQ,eAChBE,WAAaF,QAAQ,mBACrBG,OAASH,QAAQ,eACjBI,MAAQJ,QAAQ,cA8BtBK,QAAA,WAAA,QAAAA,MA2BA,MA1BIA,GAAAC,UAAAC,MAAA,WACI,QAEQC,KAAM,YACNC,KAAMV,mBAAAW,UAAUC,MAChBC,OAAO,EACPC,OACI,WAAM,MAAAZ,OAAM,eACZ,WAAM,MAAAC,YAAWY,QACjB,SAACC,GAAW,MAAAX,OAAsBW,EAAOC,OAAQC,cAAiBC,SAAU,aAC5E,SAACH,GAAW,MAAAb,YAAWiB,MAAsBJ,EAAOC,OAAQI,YAAc,oBAI9EZ,KAAM,YACNC,KAAMV,mBAAAW,UAAUW,QAAUtB,mBAAAW,UAAUY,OACpCT,OACI,WAAM,MAAAZ,OAAM,eACZ,WAAM,MAAAC,YAAWY,QACjB,SAACC,GAAW,MAAAX,OAAsBW,EAAOC,OAAQC,cAAiBC,SAAU,aAC5E,WAAM,MAAAf,WACN,SAACY,GAAW,MAAAb,YAAWiB,MAAsBJ,EAAOC,OAAQI,YAAc,qBAvB9Ff,EAAAkB,YAACxB,mBAAAyB,qDACYC,SAAApB,QAAOA","file":"../index.js","sourcesContent":["// import * as path from 'path';\r\nimport { IDynamicTaskOption, Operation, IAsserts, IDynamicTasks, dynamicTask } from 'development-core';\r\n// import * as chalk from 'chalk';\r\nconst cache = require('gulp-cached');\r\nconst sourcemaps = require('gulp-sourcemaps');\r\nconst uglify = require('gulp-uglify');\r\nconst babel = require('gulp-babel');\r\n\r\n\r\n/**\r\n * js assert task optin.\r\n * \r\n * @export\r\n * @interface IJsTaskOption\r\n * @extends {IAsserts}\r\n */\r\nexport interface IJsTaskOption extends IAsserts {\r\n\r\n    /**\r\n     * babel 6 option.\r\n     * \r\n     * @type {*}\r\n     * @memberOf IJsTaskOption\r\n     */\r\n    babelOption?: any;\r\n\r\n    /**\r\n     * sourceMaps path.\r\n     * \r\n     * @type {string}\r\n     * @memberOf IJsTaskOption\r\n     */\r\n    sourceMaps?: string;\r\n}\r\n\r\n@dynamicTask\r\nexport class JsTasks implements IDynamicTasks {\r\n    tasks(): IDynamicTaskOption[] {\r\n        return [\r\n            {\r\n                name: 'jscompile',\r\n                oper: Operation.build,\r\n                watch: true,\r\n                pipes: [\r\n                    () => cache('javascript'),\r\n                    () => sourcemaps.init(),\r\n                    (config) => babel((<IJsTaskOption>config.option).babelOption || { presets: ['es2015'] }),\r\n                    (config) => sourcemaps.write((<IJsTaskOption>config.option).sourceMaps || './sourcemaps')\r\n                ]\r\n            },\r\n            {\r\n                name: 'jscompile',\r\n                oper: Operation.release | Operation.deploy,\r\n                pipes: [\r\n                    () => cache('javascript'),\r\n                    () => sourcemaps.init(),\r\n                    (config) => babel((<IJsTaskOption>config.option).babelOption || { presets: ['es2015'] }),\r\n                    () => uglify(),\r\n                    (config) => sourcemaps.write((<IJsTaskOption>config.option).sourceMaps || './sourcemaps')\r\n                ]\r\n            }\r\n        ];\r\n    }\r\n}\r\n"]}